<!doctype html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    
    <title>Owen Wattimena - Menghitung Dana Pensiun</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Lobster&family=Roboto:wght@300;400;700&display=swap');
        html, body{
            font-family: 'Roboto', sans-serif;
        }
        .bg-success{
            background-color: #0AC480!important;
            border-color: #0AC480;
        }
        .bg-success-accen{
            background-color: #DCFFF2!important;
        }
        .border-success{
            border-color: #0AC480!important;
        }
        .card{
            border-color: #0AC480!important;
        }
        .text-success{
            color:#0AC480!important;
        }
        .navbar-brand{
            font-family: 'Lobster', cursive;
        }
    </style>
</head>
<body>
    <!-- As a heading -->
    <nav class="navbar navbar-light bg-light shadow-sm">
        <div class="row justify-content-center">
            <div class="col-8">
                <div class="container-fluid py-2">
                    <span class="navbar-brand mb-0 h1 w-100">Owen 
                        <span class="text-success">
                            Wattimena
                        </span>
                    </span>
                </div>
            </div>
        </div>
    </nav>
    
    <div class="container-fluid">
        <div class="row justify-content-center">
            <div class="col-sm-8">
                <div class="card mx-auto my-5">
                    <div class="card-header bg-success text-light">
                        <div class="h1">Menghitung Dana Pensiun</div>
                        <p>Menghitung kebutuhan dana pensiun dan angka yang harus ditabung setiap bulan untuk mencapainya</p>
                    </div>
                    <div class="card-body p-0">
                        <div class="container p-sm-5">
                            <!-- UMUR -->
                            <div class="mb-3 row">
                                <label for="inputUmur" class="col-sm-6 col-form-label">Umur <sub>(Tahun)</sub></label>
                                <div class="col-sm-6">
                                    <input type="text" class="form-control" id="inputUmur" placeholder="Masukan Umur Saat Ini" value="23">
                                </div>
                            </div>
                            <!-- TARGET PENSIUN -->
                            <div class="mb-3 row">
                                <label for="inputUmurPensiun" class="col-sm-6 col-form-label">Target Umur Pensiun <sub>(Tahun)</sub></label>
                                <div class="col-sm-6">
                                    <input type="text" class="form-control" id="inputUmurPensiun" placeholder="Masukan Target Umur Pensiun" value="60">
                                </div>
                            </div>
                            <!-- PENGELUARAN PERBULAN -->
                            <div class="mb-3 row">
                                <label for="inputPengeluaranPerbulan" class="col-sm-6 col-form-label">Pengeluaran Perbulan <sub>(Rp)</sub></label>
                                <div class="col-sm-6">
                                    <input type="text" class="form-control" id="inputPengeluaranPerbulan" placeholder="Masukan Pengeluaran Perbulan" value="10000000">
                                </div>
                            </div>
                            <!-- INFLASI TAHUNAN -->
                            <div class="mb-3 row">
                                <label for="inputInflasiTahunan" class="col-sm-6 col-form-label">Inflasi Tahunan (%)</label>
                                <div class="col-sm-6">
                                    <input type="text" class="form-control" id="inputInflasiTahunan" value="4" placeholder="Masukan Inflasi Tahunan">
                                </div>
                            </div>
                            <!-- TARGET RETURN INFESTASI -->
                            <div class="mb-3 row">
                                <label for="inputTargetReturn" class="col-sm-6 col-form-label">Target Return Investasi (%)</label>
                                <div class="col-sm-6">
                                    <input type="text" class="form-control" id="inputTargetReturn" value="9" placeholder="Masukan Target Return Investasi">
                                </div>
                            </div>
                            <!-- DANA INVESTASI -->
                            <div class="mb-3 row">
                                <label for="inputDanaTersedia" class="col-sm-6 col-form-label">Dana Investasi Yang Tersedia <sub>(Rp)</sub></label>
                                <div class="col-sm-6">
                                    <input type="text" class="form-control" id="inputDanaTersedia" placeholder="Masukan Dana Investasi Yang Tersedia" value="100000000">
                                </div>
                            </div>
                        </div>
                        <div class="border-top border-success">
                            <div class="container p-sm-5">
                                <div class="mb-3 row">
                                    <strong class="col-sm-6 col-form-label">Pengeluaran Tahunan Saat Ini</strong>
                                    <div class="col-sm-6">
                                        Rp.<span id="pengeluaranTahunan">1000</span>
                                    </div>
                                </div>
                                <div class="mb-3 row">
                                    <strong class="col-sm-6 col-form-label">Pengeluaran Tahunan Saat Pensiun</strong>
                                    <div class="col-sm-6">
                                        Rp. <span id="pengeluaranTahunanPensiun">1000</span>
                                    </div>
                                </div>
                                <div class="mb-3 row">
                                    <strong class="col-sm-6 col-form-label">Sisa Waktu Untuk Pensiun</strong>
                                    <div class="col-sm-6">
                                        <span id="sisaWaktuPensiun">1000</span> Tahun
                                    </div>
                                </div>
                                <div class="mb-3 row">
                                    <strong class="col-sm-6 col-form-label">Dana Pensiun Yang Dibutuhkan</strong>
                                    <div class="col-sm-6">
                                        Rp. <span class="danaPensiun">1000</span>
                                    </div>
                                </div>
                                <div class="mb-3 row">
                                    <strong class="col-sm-6 col-form-label">Dana Investasi Tiap Tahun</strong>
                                    <div class="col-sm-6">
                                        Rp. <span id="investasiTahunan">1000</span>
                                    </div>
                                </div>
                                <div class="mb-3 row">
                                    <strong class="col-sm-6 col-form-label">Investasi Yang Dibutuhkan Tiap Bulan</strong>
                                    <div class="col-sm-6">
                                        Rp. <span class="investasiBulanan">1000</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="border-top border-success">
                            <div class="container p-3 text-center bg-success-accen">
                                <div class="h3 fw-bold">Total dana pensiun yang anda butuhkan adalah <span class="text-success">Rp. <span class="danaPensiun">0</span> </span></div>
                                <div class="h3 fw-bold">Total dana yang harus di investasikan tiap bulan adalah <span class="text-success">Rp. <span class="investasiBulanan">0</span> </span></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Optional JavaScript; choose one of the two! -->
    
    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
    -->
    <script>
        let umur, umurPensiun, pengeluaranPerbulan, inflasiTahunan, targetReturn, danaTersedia;
        // Result Element
        let pengeluaranTahunan          = $("#pengeluaranTahunan");
        let pengeluaranTahunanPensiun   = $("#pengeluaranTahunanPensiun");
        let sisaWaktuPensiun            = $("#sisaWaktuPensiun");
        let danaPensiun                 = $(".danaPensiun");
        let investasiTahunan            = $("#investasiTahunan");
        let investasiBulanan            = $(".investasiBulanan");
        
        $(function(){
            
            
            
            
            $("#inputUmur").val(parseInt($("#inputUmur").val().replace(/\D/g, ''),10).toLocaleString())
            $("#inputUmurPensiun").val(parseInt($("#inputUmurPensiun").val().replace(/\D/g, ''),10).toLocaleString())
            $("#inputPengeluaranPerbulan").val(parseInt($("#inputPengeluaranPerbulan").val().replace(/\D/g, ''),10).toLocaleString())
            $("#inputDanaTersedia").val(parseInt($("#inputDanaTersedia").val().replace(/\D/g, ''),10).toLocaleString())
            // Input Element Value
            umur                        = $('#inputUmur').val().replace(/,/g, "").replace(/\./g, "");
            umurPensiun                 = $('#inputUmurPensiun').val().replace(/,/g, "").replace(/\./g, "");
            pengeluaranPerbulan         = $('#inputPengeluaranPerbulan').val().replace(/,/g, "").replace(/\./g, "");
            inflasiTahunan              = $('#inputInflasiTahunan').val().replace(/,/g, "").replace(/\./g, "");
            targetReturn                = $('#inputTargetReturn').val().replace(/,/g, "").replace(/\./g, "");
            danaTersedia                = $('#inputDanaTersedia').val().replace(/,/g, "").replace(/\./g, "");
            
            hitungDanaPensiun(umur, umurPensiun, pengeluaranPerbulan, inflasiTahunan, targetReturn, danaTersedia);
        })
        
        $("input[type='text']").on('keyup', function(){
            var n = parseInt($(this).val().replace(/\D/g,''),10);
            if(!isNaN(n)){
                $(this).val(n.toLocaleString());
            }else{
                $(this).val("");
            }
            umur                        = $('#inputUmur').val().replace(/,/g, "").replace(/\./g, "");
            umurPensiun                 = $('#inputUmurPensiun').val().replace(/,/g, "").replace(/\./g, "");
            pengeluaranPerbulan         = $('#inputPengeluaranPerbulan').val().replace(/,/g, "").replace(/\./g, "");
            inflasiTahunan              = $('#inputInflasiTahunan').val().replace(/,/g, "").replace(/\./g, "");
            targetReturn                = $('#inputTargetReturn').val().replace(/,/g, "").replace(/\./g, "");
            danaTersedia                = $('#inputDanaTersedia').val().replace(/,/g, "").replace(/\./g, "");
            hitungDanaPensiun(umur, umurPensiun, pengeluaranPerbulan, inflasiTahunan, targetReturn, danaTersedia);
        });
        
        function hitungDanaPensiun(umur, umurPensiun, pengeluaranPerbulan, inflasiTahunan, targetReturn, danaTersedia)
        {
            var _pengeluaranTahunan = pengeluaranPerbulan * 12;
            var _inflasiTahunan = inflasiTahunan/100;
            var _sisaWaktuPensiun = umurPensiun - umur
            var _pengeluaranTahunanPensiun = _pengeluaranTahunan * Math.pow(1+_inflasiTahunan, _sisaWaktuPensiun);
            var _danaPensiun = _pengeluaranTahunanPensiun/_inflasiTahunan;
            var _investasiTahunan = pmt(targetReturn/100, _sisaWaktuPensiun, danaTersedia, -_danaPensiun, 0)
            var _investasiBulanan = _investasiTahunan/12;
            
            pengeluaranTahunan.text(_pengeluaranTahunan.toLocaleString())
            pengeluaranTahunanPensiun.text(parseInt(_pengeluaranTahunanPensiun).toLocaleString())
            sisaWaktuPensiun.text(_sisaWaktuPensiun.toLocaleString())
            danaPensiun.text(parseInt(_danaPensiun).toLocaleString())
            investasiTahunan.text(parseInt(_investasiTahunan).toLocaleString())
            investasiBulanan.text(parseInt(_investasiBulanan).toLocaleString())
        }
        
        function pmt(rate_per_period, number_of_payments, present_value, future_value, type){
            future_value = typeof future_value !== 'undefined' ? future_value : 0;
            type = typeof type !== 'undefined' ? type : 0;
            
            if(rate_per_period != 0.0){
                // Interest rate exists
                var q = Math.pow(1 + rate_per_period, number_of_payments);
                return -(rate_per_period * (future_value + (q * present_value))) / ((-1 + q) * (1 + rate_per_period * (type)));
                
            } else if(number_of_payments != 0.0){
                // No interest rate, but number of payments exists
                return -(future_value + present_value) / number_of_payments;
            }
            
            return 0;
        }
    </script>
</body>
</html>